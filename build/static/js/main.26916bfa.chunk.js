(this["webpackJsonpwarehouse-frontend"]=this["webpackJsonpwarehouse-frontend"]||[]).push([[0],{71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(13),s=a.n(r),c=a(16),i=a(12),o=a.n(i),u=a(17),d=a(18),l=a.n(d),f="/api/products",b={getAll:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get(f);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getBeanies:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("".concat(f,"/beanies"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getFacemasks:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("".concat(f,"/facemasks"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getGloves:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("".concat(f,"/gloves"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},j=a(15),p=a(34),g=(a(69),a(5)),h=function(e){var t=e.products,a=e.display;if(!t||a!==t.category)return Object(g.jsx)("div",{});var n=t.catalog;return n.length>0?Object(g.jsx)("div",{className:"product-list",children:Object(g.jsx)(p.a,{children:function(e){var t=e.width,a=e.height;return Object(g.jsxs)(j.b,{width:t,height:a,headerHeight:50,rowHeight:30,rowCount:n.length,rowGetter:function(e){var t=e.index;return n[t]},children:[Object(g.jsx)(j.a,{width:250,label:"Name",dataKey:"name"}),Object(g.jsx)(j.a,{width:150,label:"Availability",dataKey:"availability"}),Object(g.jsx)(j.a,{width:80,label:"Price",dataKey:"price"}),Object(g.jsx)(j.a,{width:150,label:"Manufacturer",dataKey:"manufacturer"}),Object(g.jsx)(j.a,{width:100,label:"Color",dataKey:"color"})]})}})}):Object(g.jsx)("div",{children:"loading..."})},O=function(e){var t=e.category,a=e.products,n=e.handleClick,r=e.display,s=!a.catalog||0===a.catalog.length,c="white",i="#ff5544";r===t&&(c="#ff5544",i="white");var o={backgroundColor:c,color:i};return Object(g.jsx)("button",{style:o,disabled:s,onClick:function(e){return n(t,e)},children:t})},v=function(e){var t=e.status;return Object(g.jsx)("div",{className:"update-status-block",children:t})},x=function(){var e=Object(n.useState)(""),t=Object(c.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)([]),i=Object(c.a)(s,2),o=i[0],u=i[1],d=Object(n.useState)([]),l=Object(c.a)(d,2),f=l[0],j=l[1],p=Object(n.useState)([]),x=Object(c.a)(p,2),y=x[0],m=x[1],w=Object(n.useState)(""),k=Object(c.a)(w,2),S=k[0],N=k[1];Object(n.useEffect)((function(){var e=new EventSource("".concat("","/api/stream"));e.onopen=function(){N("checking for updates")},e.onmessage=function(t){var a=JSON.parse(t.data);if(a){var n=a.find((function(e){return"beanies"===e.category})),r=a.find((function(e){return"facemasks"===e.category})),s=a.find((function(e){return"gloves"===e.category}));n&&u(n),r&&j(r),s&&m(s)}e.close(),N("everything up-to-date!"),setTimeout((function(){N("")}),5e3)}}),[]),Object(n.useEffect)((function(){var e=sessionStorage.getItem("beanies"),t=sessionStorage.getItem("facemasks"),a=sessionStorage.getItem("gloves");e?(u(JSON.parse(e)),r("beanies")):b.getBeanies().then((function(e){u(e),r("beanies"),sessionStorage.setItem("beanies",JSON.stringify(e))})),t?j(JSON.parse(t)):b.getFacemasks().then((function(e){j(e),sessionStorage.setItem("facemasks",JSON.stringify(e))})),a?m(JSON.parse(a)):b.getGloves().then((function(e){m(e),sessionStorage.setItem("gloves",JSON.stringify(e))}))}),[]);var J=function(e,t){t.preventDefault(),r(e)},C=function(){return Object(g.jsxs)("div",{className:"header",children:[Object(g.jsx)(O,{category:"beanies",products:o,handleClick:J,display:a}),Object(g.jsx)(O,{category:"facemasks",products:f,handleClick:J,display:a}),Object(g.jsx)(O,{category:"gloves",products:y,handleClick:J,display:a}),Object(g.jsx)(v,{status:S})]})};return Object(g.jsxs)("div",{className:"container",children:[Object(g.jsx)(C,{}),""===a?Object(g.jsx)("div",{children:"loading..."}):Object(g.jsx)("div",{}),Object(g.jsx)(h,{products:o,display:a}),Object(g.jsx)(h,{products:f,display:a}),Object(g.jsx)(h,{products:y,display:a})]})};a(71);s.a.render(Object(g.jsx)(x,{}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.26916bfa.chunk.js.map