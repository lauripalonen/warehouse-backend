{"version":3,"sources":["services/products.js","components/ProductTable.js","components/CategoryButton.js","components/UpdateStatus.js","App.js","index.js"],"names":["baseUrl","Getters","getAll","a","axios","get","response","getBeanies","data","getFacemasks","getGloves","ProductTable","products","display","category","catalog","length","className","width","height","headerHeight","rowHeight","rowCount","rowGetter","index","label","dataKey","CategoryButton","handleClick","disabled","bgColor","fontColor","styles","backgroundColor","color","style","onClick","event","UpdateStatus","status","App","useState","setDisplay","beanies","setBeanies","facemasks","setFacemasks","gloves","setGloves","updateStatus","setUpdateStatus","useEffect","eventSource","EventSource","onopen","onmessage","message","JSON","parse","beaniesUpdate","find","product","facemaskUpdate","glovesUpdate","close","setTimeout","cachedBeanies","sessionStorage","getItem","cachedFacemasks","cachedGloves","productService","then","setItem","stringify","preventDefault","Header","ReactDOM","render","document","getElementById"],"mappings":"yOACMA,EAAU,gBAwBDC,EAFC,CAAEC,OApBN,uCAAG,4BAAAC,EAAA,sEACUC,IAAMC,IAAIL,GADpB,cACPM,EADO,yBAENA,GAFM,2CAAH,qDAoBcC,WAfV,uCAAG,4BAAAJ,EAAA,sEACMC,IAAMC,IAAN,UAAaL,EAAb,aADN,cACXM,EADW,yBAEVA,EAASE,MAFC,2CAAH,qDAesBC,aAVpB,uCAAG,4BAAAN,EAAA,sEACIC,IAAMC,IAAN,UAAaL,EAAb,eADJ,cACbM,EADa,yBAEZA,EAASE,MAFG,2CAAH,qDAUkCE,UALrC,uCAAG,4BAAAP,EAAA,sEACOC,IAAMC,IAAN,UAAaL,EAAb,YADP,cACVM,EADU,yBAETA,EAASE,MAFA,2CAAH,sD,+BC0BAG,EAvCM,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,SAAUC,EAAc,EAAdA,QAChC,IAAKD,GAAYC,IAAYD,EAASE,SACpC,OAAO,wBAGT,IAAMC,EAAUH,EAASG,QAEzB,OAAIA,EAAQC,OAAS,EAEjB,qBAAKC,UAAW,eAAhB,SACE,cAAC,IAAD,UACG,gBAAGC,EAAH,EAAGA,MAAOC,EAAV,EAAUA,OAAV,OACC,eAAC,IAAD,CACED,MAAOA,EACPC,OAAQA,EACRC,aAAc,GACdC,UAAW,GACXC,SAAUP,EAAQC,OAClBO,UAAW,gBAAGC,EAAH,EAAGA,MAAH,OAAeT,EAAQS,IANpC,UAOE,cAAC,IAAD,CAAQN,MAAO,IAAKO,MAAM,OAAOC,QAAQ,SACzC,cAAC,IAAD,CAAQR,MAAO,IAAKO,MAAM,eAAeC,QAAQ,iBACjD,cAAC,IAAD,CAAQR,MAAO,GAAIO,MAAM,QAAQC,QAAQ,UACzC,cAAC,IAAD,CAAQR,MAAO,IAAKO,MAAM,eAAeC,QAAQ,iBACjD,cAAC,IAAD,CAAQR,MAAO,IAAKO,MAAM,QAAQC,QAAQ,kBASpD,8CCVWC,EAzBQ,SAAC,GAAkD,IAAhDb,EAA+C,EAA/CA,SAAUF,EAAqC,EAArCA,SAAUgB,EAA2B,EAA3BA,YAAaf,EAAc,EAAdA,QACnDgB,GAAajB,EAASG,SAAuC,IAA5BH,EAASG,QAAQC,OACpDc,EAAU,QACVC,EAAY,UAEZlB,IAAYC,IACdgB,EAAU,UACVC,EAAY,SAGd,IAAMC,EAAS,CACbC,gBAAiBH,EACjBI,MAAOH,GAGT,OACE,wBACEI,MAAOH,EACPH,SAAUA,EACVO,QAAS,SAACC,GAAD,OAAWT,EAAYd,EAAUuB,IAH5C,SAIGvB,KCZQwB,EARM,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OACtB,OACE,qBAAKtB,UAAW,sBAAhB,SACGsB,KC2GQC,EAxGH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACT5B,EADS,KACA6B,EADA,OAEcD,mBAAS,IAFvB,mBAETE,EAFS,KAEAC,EAFA,OAGkBH,mBAAS,IAH3B,mBAGTI,EAHS,KAGEC,EAHF,OAIYL,mBAAS,IAJrB,mBAITM,EAJS,KAIDC,EAJC,OAKwBP,mBAAS,IALjC,mBAKTQ,EALS,KAKKC,EALL,KAOhBC,qBAAU,WACR,IAAIC,EAAc,IAAIC,YAAJ,UAV6D,GAU7D,gBAClBD,EAAYE,OAAS,WACnBJ,EAAgB,yBAElBE,EAAYG,UAAY,SAAAC,GACtB,IAAM5C,EAAW6C,KAAKC,MAAMF,EAAQhD,MAEpC,GAAII,EAAU,CACZ,IAAM+C,EAAgB/C,EAASgD,MAAK,SAAAC,GAAO,MAAyB,YAArBA,EAAQ/C,YACjDgD,EAAiBlD,EAASgD,MAAK,SAAAC,GAAO,MAAyB,cAArBA,EAAQ/C,YAClDiD,EAAenD,EAASgD,MAAK,SAAAC,GAAO,MAAyB,WAArBA,EAAQ/C,YAElD6C,GACFf,EAAWe,GAETG,GACFhB,EAAagB,GAEXC,GACFf,EAAUe,GAIdX,EAAYY,QACZd,EAAgB,0BAChBe,YAAW,WACTf,EAAgB,MACf,QAEJ,IAEHC,qBAAU,WACR,IAAMe,EAAgBC,eAAeC,QAAQ,WACvCC,EAAkBF,eAAeC,QAAQ,aACzCE,EAAeH,eAAeC,QAAQ,UAExCF,GACFtB,EAAWa,KAAKC,MAAMQ,IACtBxB,EAAW,YAEX6B,EAAehE,aACZiE,MAAK,SAAA7B,GACJC,EAAWD,GACXD,EAAW,WACXyB,eAAeM,QAAQ,UAAWhB,KAAKiB,UAAU/B,OAInD0B,EACFvB,EAAaW,KAAKC,MAAMW,IAExBE,EAAe9D,eACZ+D,MAAK,SAAA3B,GACJC,EAAaD,GACbsB,eAAeM,QAAQ,YAAahB,KAAKiB,UAAU7B,OAIrDyB,EACFtB,EAAUS,KAAKC,MAAMY,IAErBC,EAAe7D,YACZ8D,MAAK,SAAAzB,GACJC,EAAUD,GACVoB,eAAeM,QAAQ,SAAUhB,KAAKiB,UAAU3B,SAGrD,IAEH,IAAMnB,EAAc,SAACd,EAAUuB,GAC7BA,EAAMsC,iBACNjC,EAAW5B,IAGP8D,EAAS,WACb,OACE,sBAAK3D,UAAW,SAAhB,UACE,cAAC,EAAD,CAAgBH,SAAU,UAAWF,SAAU+B,EAASf,YAAaA,EAAaf,QAASA,IAC3F,cAAC,EAAD,CAAgBC,SAAU,YAAaF,SAAUiC,EAAWjB,YAAaA,EAAaf,QAASA,IAC/F,cAAC,EAAD,CAAgBC,SAAU,SAAUF,SAAUmC,EAAQnB,YAAaA,EAAaf,QAASA,IACzF,cAAC,EAAD,CAAc0B,OAAQU,QAK5B,OACE,sBAAKhC,UAAW,YAAhB,UACE,cAAC2D,EAAD,IACa,KAAZ/D,EAAiB,6CAAwB,wBAC1C,cAAC,EAAD,CAAcD,SAAU+B,EAAS9B,QAASA,IAC1C,cAAC,EAAD,CAAcD,SAAUiC,EAAWhC,QAASA,IAC5C,cAAC,EAAD,CAAcD,SAAUmC,EAAQlC,QAASA,Q,MCtG/CgE,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.26916bfa.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/products'\n\nconst getAll = async () => {\n  const response = await axios.get(baseUrl)\n  return response\n}\n\nconst getBeanies = async () => {\n  const response = await axios.get(`${baseUrl}/beanies`)\n  return response.data\n}\n\nconst getFacemasks = async () => {\n  const response = await axios.get(`${baseUrl}/facemasks`)\n  return response.data\n}\n\nconst getGloves = async () => {\n  const response = await axios.get(`${baseUrl}/gloves`)\n  return response.data\n}\n\nconst Getters = { getAll, getBeanies, getFacemasks, getGloves }\n\nexport default Getters","import React from 'react'\nimport { Column, Table } from 'react-virtualized'\nimport AutoSizer from 'react-virtualized-auto-sizer'\nimport 'react-virtualized/styles.css'\n\nconst ProductTable = ({ products, display }) => {\n  if (!products || display !== products.category) {\n    return <div></div>\n  }\n\n  const catalog = products.catalog\n\n  if (catalog.length > 0) {\n    return (\n      <div className={'product-list'}>\n        <AutoSizer>\n          {({ width, height }) => (\n            <Table\n              width={width}\n              height={height}\n              headerHeight={50}\n              rowHeight={30}\n              rowCount={catalog.length}\n              rowGetter={({ index }) => catalog[index]}>\n              <Column width={250} label=\"Name\" dataKey=\"name\" />\n              <Column width={150} label=\"Availability\" dataKey=\"availability\" />\n              <Column width={80} label=\"Price\" dataKey=\"price\" />\n              <Column width={150} label=\"Manufacturer\" dataKey=\"manufacturer\" />\n              <Column width={100} label=\"Color\" dataKey=\"color\" />\n            </Table>\n          )}\n        </AutoSizer>\n      </div>\n    )\n  }\n\n  return (\n    <div>\n      loading...\n    </div>\n  )\n\n}\n\nexport default ProductTable","import React from 'react'\n\nconst CategoryButton = ({ category, products, handleClick, display }) => {\n  const disabled = (!products.catalog || products.catalog.length === 0)\n  var bgColor = 'white'\n  var fontColor = '#ff5544'\n\n  if (display === category) {\n    bgColor = '#ff5544'\n    fontColor = 'white'\n  }\n\n  const styles = {\n    backgroundColor: bgColor,\n    color: fontColor,\n  }\n\n  return (\n    <button\n      style={styles}\n      disabled={disabled}\n      onClick={(event) => handleClick(category, event)}>\n      {category}\n    </button>\n  )\n}\n\nexport default CategoryButton","import React from 'react'\n\nconst UpdateStatus = ({ status }) => {\n  return (\n    <div className={'update-status-block'}>\n      {status}\n    </div>\n  )\n}\n\nexport default UpdateStatus","import React, { useState, useEffect } from 'react'\nimport productService from './services/products'\nimport ProductTable from './components/ProductTable'\nimport CategoryButton from './components/CategoryButton'\nimport UpdateStatus from './components/UpdateStatus'\n\nconst baseUrl = process.env.NODE_ENV === 'development' ? 'http://localhost:3001' : ''\n\nconst App = () => {\n  const [display, setDisplay] = useState('')\n  const [beanies, setBeanies] = useState([])\n  const [facemasks, setFacemasks] = useState([])\n  const [gloves, setGloves] = useState([])\n  const [updateStatus, setUpdateStatus] = useState('')\n\n  useEffect(() => {\n    let eventSource = new EventSource(`${baseUrl}/api/stream`)\n    eventSource.onopen = () => {\n      setUpdateStatus('checking for updates')\n    }\n    eventSource.onmessage = message => {\n      const products = JSON.parse(message.data)\n\n      if (products) {\n        const beaniesUpdate = products.find(product => product.category === 'beanies')\n        const facemaskUpdate = products.find(product => product.category === 'facemasks')\n        const glovesUpdate = products.find(product => product.category === 'gloves')\n\n        if (beaniesUpdate) {\n          setBeanies(beaniesUpdate)\n        }\n        if (facemaskUpdate) {\n          setFacemasks(facemaskUpdate)\n        }\n        if (glovesUpdate) {\n          setGloves(glovesUpdate)\n        }\n      }\n\n      eventSource.close()\n      setUpdateStatus('everything up-to-date!')\n      setTimeout(() => {\n        setUpdateStatus('')\n      }, 5000)\n    }\n  }, [])\n\n  useEffect(() => {\n    const cachedBeanies = sessionStorage.getItem('beanies')\n    const cachedFacemasks = sessionStorage.getItem('facemasks')\n    const cachedGloves = sessionStorage.getItem('gloves')\n\n    if (cachedBeanies) {\n      setBeanies(JSON.parse(cachedBeanies))\n      setDisplay('beanies')\n    } else {\n      productService.getBeanies()\n        .then(beanies => {\n          setBeanies(beanies)\n          setDisplay('beanies')\n          sessionStorage.setItem('beanies', JSON.stringify(beanies))\n        })\n    }\n\n    if (cachedFacemasks) {\n      setFacemasks(JSON.parse(cachedFacemasks))\n    } else {\n      productService.getFacemasks()\n        .then(facemasks => {\n          setFacemasks(facemasks)\n          sessionStorage.setItem('facemasks', JSON.stringify(facemasks))\n        })\n    }\n\n    if (cachedGloves) {\n      setGloves(JSON.parse(cachedGloves))\n    } else {\n      productService.getGloves()\n        .then(gloves => {\n          setGloves(gloves)\n          sessionStorage.setItem('gloves', JSON.stringify(gloves))\n        })\n    }\n  }, [])\n\n  const handleClick = (category, event) => {\n    event.preventDefault()\n    setDisplay(category)\n  }\n\n  const Header = () => {\n    return (\n      <div className={'header'}>\n        <CategoryButton category={'beanies'} products={beanies} handleClick={handleClick} display={display} />\n        <CategoryButton category={'facemasks'} products={facemasks} handleClick={handleClick} display={display} />\n        <CategoryButton category={'gloves'} products={gloves} handleClick={handleClick} display={display} />\n        <UpdateStatus status={updateStatus} />\n      </div>\n    )\n  }\n\n  return (\n    <div className={'container'}>\n      <Header />\n      {display === '' ? <div>loading...</div> : <div></div>}\n      <ProductTable products={beanies} display={display} />\n      <ProductTable products={facemasks} display={display} />\n      <ProductTable products={gloves} display={display} />\n    </div>\n  )\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}